.page {
  display: grid;
  gap: var(--space-3);
}

.header {
  display: grid;
  gap: var(--space-1);
}

.headerRow {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--space-3);
  flex-wrap: wrap;
}

.header p {
  color: var(--text-secondary);
}

.exportButton {
  min-width: calc(var(--space-12) * 1.8);
}

.headerActions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  width: 100%;
  justify-content: flex-end;
}

.addButton {
  min-width: calc(var(--space-12) * 1.8);
}

.grid {
  display: grid;
  gap: var(--space-3);
}

.summary {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3);
  color: var(--text-primary);
  font-weight: var(--font-weight-semibold);
}

.filters {
  display: grid;
  gap: var(--space-2);
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
}

.filterField {
  display: grid;
  gap: var(--space-1);
  color: var(--text-primary);
  font-weight: var(--font-weight-semibold);
}

.filterField select {
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  min-height: 36px;
  padding: var(--space-1) var(--space-2);
  font: inherit;
  color: var(--text-primary);
  background: var(--bg-secondary);
}

.section {
  border: 1px solid var(--card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  background: var(--card-bg);
  box-shadow: var(--shadow-sm);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  max-height: 420px;
}

.sectionToggle {
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  background: transparent;
  color: var(--text-primary);
  padding: 0;
  border: none;
}

.sectionTitle {
  margin: 0;
  font-size: var(--text-2xl);
}

.table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

.tableWrap {
  width: 100%;
  overflow: auto;
  min-height: 0;
  flex: 1;
}

.mobileList {
  display: none;
}

.table th,
.table td {
  text-align: left;
  padding: var(--space-2);
  border-bottom: 1px solid var(--border-color);
}

.table th {
  position: sticky;
  top: 0;
  background: var(--card-bg);
  z-index: 1;
}

.actionsCell {
  white-space: nowrap;
}

.actionsGroup {
  display: inline-flex;
  gap: var(--space-1);
}

.mobileItem {
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-2);
  background: var(--bg-secondary);
  display: grid;
  gap: var(--space-2);
}

.mobileRow {
  display: grid;
  gap: 2px;
}

.mobileLabel {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-weight: var(--font-weight-semibold);
}

.mobileValue {
  font-size: var(--text-sm);
  color: var(--text-primary);
  font-weight: var(--font-weight-medium);
}

.mobileActions .actionsGroup {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-2);
}

.mobileEditToggle {
  width: 36px;
  height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border-color);
  background: var(--bg-secondary);
  color: var(--text-primary);
  border-radius: var(--radius-md);
}

.cellInput {
  width: 100%;
  min-width: 120px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-1) var(--space-2);
  font: inherit;
  color: var(--text-primary);
  background: var(--bg-secondary);
}

.actionButton {
  width: 100px;
  min-width: 100px;
}

.colDate {
  width: 12%;
}

.colCategory {
  width: 19%;
}

.colDescription {
  width: 19%;
}

.colValue {
  width: 11%;
}

.colMonthlyCost {
  width: 14%;
}

.colActions {
  width: 25%;
}

.empty {
  margin: 0;
  color: var(--text-secondary);
}

.error {
  margin: 0;
  color: var(--danger-500);
  font-weight: var(--font-weight-semibold);
}

.resultFooter {
  border-top: 1px solid var(--border-color);
  padding-top: var(--space-2);
  color: var(--text-primary);
}

.exportForm {
  display: grid;
  gap: var(--space-3);
}

.exportPeriodGrid {
  display: grid;
  gap: var(--space-2);
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.exportPreview {
  border: 1px solid color-mix(in srgb, var(--brand-500) 25%, var(--border-color));
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--bg-secondary) 92%, transparent);
  padding: var(--space-2);
  display: grid;
  gap: 2px;
}

.exportPreview p {
  margin: 0;
}

.createForm {
  display: grid;
  gap: var(--space-3);
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

.createField {
  display: grid;
  gap: var(--space-1);
  color: var(--text-primary);
  font-weight: var(--font-weight-semibold);
  min-width: 0;
}

.createFieldType {
  grid-column: 1 / -1;
  max-width: 280px;
}

.createFieldFull {
  grid-column: 1 / -1;
}

.createField input,
.createField select,
.createField textarea {
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-3);
  font: inherit;
  color: var(--text-primary);
  background: var(--bg-secondary);
}

.categoryInline {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: var(--space-2);
  align-items: center;
}

.categoryManager {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  height: min(72dvh, 540px);
}

.categoryTopBar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap;
  padding-bottom: var(--space-1);
  border-bottom: 1px solid color-mix(in srgb, var(--border-color) 80%, transparent);
}

.categoryList {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  gap: var(--space-1);
  overflow: auto;
  padding-right: var(--space-1);
  padding-top: var(--space-1);
}

.categoryItem {
  border: 1px solid color-mix(in srgb, var(--border-color) 85%, transparent);
  border-radius: 12px;
  padding: var(--space-2) var(--space-3);
  background: color-mix(in srgb, var(--bg-secondary) 92%, transparent);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.categoryItem:hover {
  border-color: color-mix(in srgb, var(--brand-500) 45%, var(--border-color));
}

.categoryItemInfo {
  min-width: 0;
  flex: 1;
}

.categoryName {
  display: block;
  color: var(--text-primary);
  font-size: var(--text-md);
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.categoryActions {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  flex-wrap: nowrap;
  flex-shrink: 0;
}

.createCheck {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  color: var(--text-primary);
  font-weight: var(--font-weight-semibold);
  grid-column: 1 / -1;
}

.createFeedback {
  margin: 0;
  color: var(--text-secondary);
  font-weight: var(--font-weight-semibold);
  grid-column: 1 / -1;
}

.createActions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-2);
  flex-wrap: wrap;
  grid-column: 1 / -1;
}

@media (max-width: 900px) {
  .table {
    min-width: 700px;
  }

  .actionsGroup {
    flex-wrap: wrap;
  }
}

@media (max-width: 640px) {
  .page {
    gap: var(--space-2);
  }

  .filters {
    grid-template-columns: 1fr;
  }

  .exportButton {
    width: 100%;
    min-width: 0;
  }

  .addButton {
    width: 100%;
    min-width: 0;
  }

  .headerActions {
    justify-content: stretch;
  }

  .section {
    max-height: none;
    padding: var(--space-2);
  }

  .tableWrap {
    display: none;
  }

  .mobileList {
    display: grid;
    gap: var(--space-2);
  }

  .mobileActions {
    display: grid;
    gap: var(--space-2);
    justify-items: start;
  }

  .actionButton {
    width: 100%;
    min-width: 0;
  }

  .createForm {
    grid-template-columns: 1fr;
  }

  .exportPeriodGrid {
    grid-template-columns: 1fr;
  }

  .createFieldType {
    max-width: none;
  }

  .categoryInline {
    grid-template-columns: 1fr;
  }

  .categoryItem {
    flex-direction: column;
    align-items: stretch;
  }

  .categoryTopBar {
    align-items: stretch;
  }

  .createActions {
    display: grid;
    grid-template-columns: 1fr;
  }

  .categoryActions {
    display: flex;
    justify-content: flex-end;
  }
}
